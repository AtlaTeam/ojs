OJS 3.3.0 Release Notes
Git tag: 3_3_0-11

Release date: June 7, 2022
===========================

Configuration Changes
---------------------

See config.TEMPLATE.inc.php for a description and examples of all supported
configuration parameters.

- An allowed_hosts option was added to protect against HOST injection attacks.
  We recommend configuring this setting! See "Recommended Configuration" in
  docs/README.md for details. (https://github.com/pkp/pkp-lib/issues/7649)
- The proxy configuration settings have changed. Please review the [proxy]
  section in config.TEMPLATE.inc.php and adapt your settings in config.inc.php
  as needed.
- The db.persistent option for persistent database connections has been removed.
- The db.collation option for configuring a database connection collation has
  been added (default: utf8_general_ci)

New config.inc.php parameters added for OAuth-based SMTP authorization:
(see https://github.com/PHPMailer/PHPMailer/wiki/Using-Gmail-with-XOAUTH2)
- email.smtp_authtype: See PHPMailer's AuthType setting
- email.smtp_oauth_provider
- email.smtp_oauth_email
- email.smtp_oauth_clientid
- email.smtp_oauth_clientsecret
- email.smtp_oauth_refreshtoken

3.3.0-11 Build
--------------
    #2169: Mailing Address should not be required in settings
    #6209: Multiple use of id="setup-button" in website settings
    #7317: CSV user export includes roles from other journals
    #7604: Add ability to include user/context with CLI request
    #7651: Fatal error when trying to load PKPXMLParser
    #7716: Hide DB password in the administration "system info" page
    #7739: Improve multimodal publishing with OJS
    #7744: Ensure email template variables are properly filtered
    #7751: Error if on private site password protected
    #7773: Import XML missing filesize attribute to file node causes confusing fatal error
    #7776: Configuration parameters get truncated if they are too long
    #7793: Allow for plugins to describe support for fuzzy or wildcarded versions
    #7794: Fix download filenames when encoded into content headers
    #7816: Fatal error when deleting a submission
    #7820: OJS: PHP Fatal error:  Declaration of SubmissionChecklistForm::initData($args) must be compatible with Form::initData()
    #7828: Submission files and db entries are not deleted after being rejected during upload process
    #7861: Fix fatal error with pickier PHP release and array_intersect
    #7864: Full title in page title and DC.Title
    #7881: User verification process failing with internal exception
    #7895: fatal error when thanking a reviewer
    #7930: Ensure umask is respected in file creation
    #7935: Stop using deprecated fgetss() function
    #7943: Typo in getUsersWithNoRole query
    #7958: 3.3.0 installs a locale column in the publications table that should have been removed


3.3.0-10 Build
-------------
    #7749: Resolve upgrade issue with latest 3.2.x ORCID profile plugin
    #7739: Add MIME type hint for Javascript files

3.3.0-9 Build
-------------
    #7649: Add support for limiting allowed hosts
    #7685: Add Authorization header support to API interactions
    #7580: Fatal error when importing XML article in PHP8
    #7681: Add Publication object to publication forms so hooks can use it
    #7664: Fatal error when trying to delete section
    #7654: admin page does not refresh when removing a context
    #7613: Keyword auto complete not working while submitting a preprint/book/submission
    #7471: Upgrade optimizations: submission locales, submission event logs, delete old revisions
    #7538: Task list is not sorted with most recent tasks at the top
    #7474: WMV files are downloaded as ASX files in Firefox
    #7607: Dublin Core subject tag only shows last keyword when more than one keyword entered
    #7620: DataCite plugin form CSRF error
    #7506: Unable to Upload/Select Files from Copyediting stage (fix ineffective)
    #7594: Submitted Competing Interest data can go missing
    #7605: Submission wizard asks for languages that are not enabled
    #7371: Add missing CSRF checks
    #7266: Assigned articles missing from future issues after upgrade to OJS 3.3.0-8
    #7596: No access granted for non-expiring subscription
    #7590: Resolve custom issue ordering error with PostgreSQL on publish
    #7213: No email is sent when creating a new announcement
    #7549: Author submission dashboard shows wrong version number
    #7552: Typo in deprecated ArticleHandler::downloadSuppFile()
    #7534: Cancelling or unassigning a reviewer who is also an editor should restore editor's access to submission
    #7509: Stage assignments permit metadata to be edited through the API even when permission has been revoked
    #7510: Possible to publish a submission in the review stage
    #7284: Missing rights for internal reviewer to download files.
    #7475: Issue table of contents has extra margins on homepage
    #6122: Recommend By Similarity Plugin doesn't work as expected
    #7453: Activity Log fails to load when a file has been uploaded to a discussion message that was deleted
    #7450: tasks cannot be marked as read/unread or deleted
    #7419: Retrieving publications in alphabetically ordered category when changing language
    #6991: Slow queries on the user management page
    #7407: Error when searching for a keyword in a language not enabled in the UI
    #7217: Default user search does not include username
    #7420: Left-to-Right (LTR) languages have UX issue on forms
    #7378: Resolve reflected XSS issues
    #7363: Cancelled review assignments included in count of active reviews
    #7344: CSS file mimetype not correctly recognized
    #7168: Unable to pick a year in the advanced filters of the search form 
    #7277: Discussion participants include declined open reviewers
    #7275: Can't upgrade to 3.2.x on PHP 8 due to use of get_magic_quotes_runtime
    #7236: Copyright info not published using quicksubmit plugin
    #7267: Allow period/full-stop in url paths
    #7281: Redundant and not escaped special characters in locale files
    #6828: New sections added to an Issue can't be custom ordered if the issue has already been custom ordered
    #4904: Update log handling to ensure metrics are calculated correctly across versions
    #5740: "Galleys" section doesn't load

3.3.0-8 Build
-------------
	#7240: Cancelling a discussion sometimes leaves an empty placeholder
	#7232: Link to report broken in report plugins
	#7214: OAI resumption token empty after first page of results
	#7194: ImportExportPlugins do not export PubIds via ScheduledTaskTool
	#7181: Provide OJS/OMP/OPS version number when requesting plugin gallery list
	#7174: ReCAPTCHA proxy is misconfigured
	#7152: Journal path of "files" has unexpected behaviour
	#7138: OJS don't replace the galley postfix in the url
	#6986: HTML entities displayed in journal title by citationStyleLanguage plugin

3.3.0-7 Build
-------------
	#7121: Call to undefined function create_function
	#7109: Use keywords (and subjects) in DataCite export
	#7108: The pubIds plugins not loaded for CLI in ImportExportPlugins
	#7102: Language parameter user.authorization.journalDoesNotPublish does not exist.
	#7098: Custom email templates lost upon changing language configuration
	#7093: Error in XML Schema for Import/Export
	#7090: Warning in administration interface about latestVersionInfo
	#7078: Dropzone.js causes upload timeouts on large files
	#7076: ReviewFormElement::getMultipleResponsesElementTypes() cannot be called statically
	#7071: PostgreSQL error upgrade from 3.1.2 to 3.3.0-6
	#7015: PayPal payment fails for amounts greater than 999
	#7004: Document the REST API endpoints for announcements
	#6944: User search phrases should match against the user's preferred name field
	#6898: Diacritics are stripped from filenames when downloading
	#6747: List of journals inside the Dashboard in unsorted
	#6469: Exporting users "Slim application error"
	#5971: Medra Issue export does not validate against XSD


